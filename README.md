# `polyscribe-canvas`

This tool is designed to consume a plain-text version of a Canvas course, and render that course on the Canvas website via the Canvas API. This allows course authors to develop courses using their choice of drafting tool, and manage course updates using version control software.

Please review [this course repository](https://github.com/CodeVA-Curriculum/cs-praxis-modules) for a complete example of a course repository designed to be processed by `polyscribe-canvas`.

## Course Structure

The `polyscribe-canvas` tool expects course content to be organized accordingly:

```
assets/
modules/
config.yaml
secret.yaml*
```

*\*Do not stage or commit `secret.yaml`; be sure to add it to `.gitignore` to avoid publishing your Canvas API token*

### `config.yaml` & `secret.yaml`

The two `.yaml` files in the root directory of the course contain course-level information and credentials used to update the Canvas course via the Canvas API.

The `config.yaml` file must define the following fields:

| Field | Description | Example |
| ----- | ----------- | ------- |
| `id`  | The Canvas course ID, found in the course URL following `courses/` | `18151` |
| `authors` | The authors of the course content, separated by commas | Jon Stapleton, Perry Shank |
| `link` | The Canvas instance URL | `https://virtualvirginia.instructure.com` |

The `secret.yaml` file contains one field:

| Field | Description |
| ----- | ----------- |
| `token` | The API access token generated by the instance admin |

**IMPORTANT: You should *never* publish your API access token. Guard it like you would a password, and add the `secret.yaml` to your `.gitignore` file to avoid inadvertently committing its contents to your version control tree.**

### The `modules` Directory

The `modules` directory contains all of the written material in the course. Course material should be organized into sub-directories, each corresponding to a Canvas module. These subdirectories should contain text material written into `.md` files in Markdown format, and a `metadata.yaml` file containing information about the module. When `polyscribe-canvas` renders the course material, it will convert the content in the `.md` files to HTML, and create a course element for each `.md` file. 

The `polyscribe-canvas` tool will generate a `manifest.json` file in your `modules` directory when it publishes your course content to Canvas. **Stage and commit this file to your `git` repository--it is required to avoid creating duplicate course elements when rendering your material on Canvas.**

Here is an example of what a typical `modules` directory might look like:

```
modules/
    00-introduction/
        intro.md
        background.md
        context.md
        metadata.yaml
    01-more-material/
        intro.md
        discussion.md
        additional-info.md
        metadata.yaml
    manifest.json*
```

*\*This file is generated by `polyscribe-canvas`. You do not need to create this file yourself, but be sure to stage and commit it using your version control software after it is generated.*

You can read more about the contents of the `modules` directory in the section on **Modules** below.

### The `assets` Directory

The `assets` directory should contain all images and other media files referenced in the course content within the `modules` directory. The `assets` directory should have a "flat" structure, with no nested directories.

The `polyscribe-canvas` tool will generate a `manifest.json` file in your `assets` directory when it publishes your course content to Canvas. **Stage and commit this file to your `git` repository.**

Here is an example of what the `assets/` directory might look like for a typical course:

```
assets/
    logo.jpg
    diagram.png
    demo.gif
    avatar.webp
    manifest.json*
```

*\*This file is generated by `polyscribe-canvas`. You do not need to create this file yourself, but be sure to stage and commit it using your version control software after it is generated.*

## Modules

TODO:

## Course Elements

The "module" folders described above should contain `.md` files. These files represent course elements (e.g., discussion boards, pages, assignments, ~~quizzes~~ (work in progress)). Authors should write their course material using Markdown in these files. Here is an example of a typical `.md` file defining a Page course element:

```md
---
title: Welcome!
type: page
---

Hello! Welcome to the course. Here are some useful links you might need:

- [Search Engine](https://google.com)
- [Google Drive](https://drive.google.com)

If you have any questions, please reach out to <jonstapleton@codevirginia.org>!

> The material in this course was developed for [CodeVA](https://codevirginia.org) and is licensed under CC-BY-SA-NC
```

Each `.md` file must define several metadata fields in a "frontmatter" section at the top of the file. The section on **Frontmatter** below provides details about these requirements.

In addition to standard Markdown syntax, `polyscribe-canvas` supports several "directives" which provide enhanced user interfaces for common HTML snippets authors often wish to include in their course elements. You can read about directives in the **Directives** section below.

### Frontmatter

The `polyscribe-canvas` tool requires that authors create "frontmatter" in their `.md` files. Each file must define the following fields:

| Field | Description | Example |
| ----- | ----------- | ------- |
| `title` | The title of the course element, which is displayed as clickable text when the course element is listed (e.g., on the *Modules* page) | `title: Welcome!` |
| `type` | The type of course element `polyscribe-canvas` should create when rendering the `.md` file. Currently, `page`, `assignment`, and `discussion` are supported. | `type: page` |

### Directives

```
::youtube[Alt text]{#id}
```

```
:::collapse{title="Button Text"}
Lorem ipsum
:::
```

```
::scratch[Description]{#id}
```
